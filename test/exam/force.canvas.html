<!DOCTYPE html>
<html lang="zh-cn">

<head>
	<meta charset="UTF-8">
	<title>clay - 使用测试 - force.canvas</title>
	<style>
		svg {
			padding: 50px;
		}
	</style>
	<script src="../libs/clay.js"></script>
	<script>

		$$(function () {

			var pen = $$('canvas')[0].getContext("2d");

			// 获取力布局
			var force = clay.layout.force(600, 600),
				circle = function (node) {
					pen.beginPath();
					pen.arc(node.x + 50, node.y + 50, 30, 0, 2 * Math.PI);
					pen.fillStyle = node.color;
					pen.closePath();
					pen.fill();
				},
				line = function (link, sourceNode, targetNode) {
					pen.beginPath();
					pen.moveTo(sourceNode.x + 50, sourceNode.y + 50);
					pen.lineTo(targetNode.x + 50, targetNode.y + 50);
					pen.lineWidth = 2;
					pen.strokeStyle = 'black';
					pen.stroke();
					pen.closePath();
				};

			// 设置处理方法
			force.bind('init', circle, line)
				.bind('update', circle, line)
				.bind('live', function () {
					pen.clearRect(0, 0, 700, 700);
				});
			;

			// 绑定初始化数据
			force(
				[
					{ "id": 1, "info": "001", "color": "red" },
					{ "id": 2, "info": "002", "color": "red" },
					{ "id": 3, "info": "003", "color": "green" },
					{ "id": 4, "info": "004", "color": "blue" },
					{ "id": 5, "info": "005", "color": "blue" },
					{ "id": 6, "info": "006", "color": "green" },
					{ "id": 7, "info": "007", "color": "green" },
					{ "id": 8, "info": "008", "color": "green" },
					{ "id": 9, "info": "009", "color": "green" },
					{ "id": 10, "info": "010", "color": "green" },
					{ "id": 11, "info": "011", "color": "green" },
					{ "id": 12, "info": "012", "color": "green" },
					{ "id": 13, "info": "013", "color": "green" },
					{ "id": 14, "info": "014", "color": "green" }
				], [
					{ "link": [4, 5], "length": 50 },
					{ "link": [4, 2], "length": 100 },
					{ "link": [1, 2], "length": 50 },
					{ "link": [5, 6], "length": 10 },
					{ "link": [3, 6], "length": 50 },
					{ "link": [6, 7], "length": 50 },
					{ "link": [2, 7], "length": 50 },
					{ "link": [8, 9], "length": 50 },
					{ "link": [8, 10], "length": 50 },
					{ "link": [8, 11], "length": 50 },
					{ "link": [8, 12], "length": 50 },
					{ "link": [7, 13], "length": 50 },
					{ "link": [1, 14], "length": 50 },
					{ "link": [8, 2], "length": 50 }
				]
			);

		});

	</script>
</head>

<body>

	<canvas width=700 height=700></canvas>

</body>

</html>
