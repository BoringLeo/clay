<!DOCTYPE html>
<html lang="zh-cn">

<head>
    <meta charset="UTF-8">
    <link rel="shortcut icon" href="./favicon.ico" type="image/x-icon">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>clay - Provide more flexible data visualization solutions!</title>
    <script src="./clay-1.0.0.min.js"></script>
    <link rel="stylesheet" href="./easycss-1.2.1.min.css">
    <link rel="stylesheet" href="style.css">
    <script>
        $$(function () {
            var data = [{ "num": -10, "index": 0 }, { "num": -3, "index": 1 },
            { "num": 2, "index": 2 }, { "num": 16, "index": 3 },
            { "num": 21, "index": 4 }, { "num": 26, "index": 5 },
            { "num": 37, "index": 6 }, { "num": 41, "index": 7 },
            { "num": 32, "index": 8 }, { "num": 30, "index": 9 },
            { "num": 0, "index": 10 }, { "num": -14, "index": 11 },
            { "num": -9, "index": 12 }];
            var line = $$.svg.line()
                // 获取x坐标方法
                .x(function (data, index) {
                    return data.index * 50;
                })
                // 获取y坐标方法
                .y(function (data) {
                    return -data.num;
                })
                // 设置插值方法
                .interpolate('cardinal')
                // 设置精度
                .setPrecision(5)
                // 设置张弛系数
                .setT(-2);
            // 设置svg
            $$('svg').setEnvironment('svg')
                .attr('width', 660).attr('height', 100)
                // 添加容器
                .append('g').children().attr('transform', 'translate(0,50)')
                // 数据绑定到结点中
                .find('path').data([data])
                // 根据数据补足结点
                .enter().append('path')
                // 设置线条样式
                .attr('stroke', 'red').attr('fill', 'none')
                //设置路径
                .attr('d', function (data, index) {
                    return line(data);
                });
        });
    </script>
</head>

<body>
    <section class='frame'>
        <a class='github' href="https://github.com/yelloxing/clay">
            Fork Me On GitHub
        </a>
        <article class='view'>
            <header>
                clay - Provide more flexible data visualization solutions!
            </header>
            <section>
                <p>
                    使用clay实现数据可视化非常的容易，也足够灵活，你可以很轻松的使用你喜欢的方式显示数据，因为我们提供了各种视图来实现把数据变成对于绘图而言更友好的格式，除此之外，还可以调用各种基本的数学方法来辅助计算，各种图形接口来绘制复杂图形和一些跨浏览器的常用方法。
                </p>
            </section>
            <section>
                <span class="title">快速开始</span>
                <p>
                    现在有2017年某地区12个月的每个月初（包括12月末）气温值，希望根据数据画出这一年的气温变化曲线，数值如下：
                    <br/> 一月初：-10，二月初：-3，三月初：2，四月初：16，五月初：21,六月初：26，七月初：37，八月初：41，九月初：32，十月初：30，十一月初：0，十二月初：-14，十二月末：-9。
                </p>
                <p>
                    首先，需要准备绘制的地方，这里我们选择SVG画布（选择别的，比如Canvas2D等都可以），具体代码如下：
                </p>
                <pre class="code">
&lt;svg&gt;&lt;/svg&gt;</pre>
                <p>
                    因为现在选择的是svg绘图，我们获取clay中提供的svg绘制曲线的对象（需要一些设置）：
                </p>
                <pre class="code">
var line = $$.svg.line()
// 获取x坐标方法
.x(function (data, index) {
    return data.index * 50;
})
// 获取y坐标方法
.y(function (data) {
    return -data.num;
})
// 设置插值方法
.interpolate('cardinal')
// 设置精度
.setPrecision(5)
// 设置张弛系数
.setT(-2);</pre>
                <p>
                    上面，我们获取的line是一个函数，根据传入的点（这里就是前面说的十二个月的气温）会返回一条曲线路径。
                </p>
                <p>
                    接着，使用line函数就可以绘制曲线了：
                </p>
                <pre class="code">
// 设置svg
$$('svg').setEnvironment('svg')
.attr('width', 660).attr('height', 100)
// 添加容器
.append('g').children().attr('transform', 'translate(50,50)')
// 数据绑定到结点中
.find('path').data([data])
// 根据数据补足结点
.enter().append('path')
// 设置线条样式
.attr('stroke', 'red').attr('fill', 'none')
//设置路径
.attr('d', function (data, index) {
    return line(data);
});</pre>
                <p>
                    其中data就是数据，具体如下：
                </p>
                <pre class="code">
var data=[{ "num": -10,"index": 0},{ "num": -3,"index": 1},
        { "num": 2,"index": 2},{ "num": 16,"index": 3},
        { "num": 21,"index": 4},{ "num": 26,"index": 5},
        { "num": 37,"index": 6},{ "num": 41,"index": 7},
        { "num": 32,"index": 8},{ "num": 30,"index": 9},
        { "num": 0,"index": 10},{ "num": -14,"index": 11},
        { "num": -9,"index": 12}];</pre>
                <p>此刻，看见的结果如下：</p>
                <svg></svg>
                <p>
                    绘制一条曲线就是这样简单（如果想使用别的绘图工具绘制曲线，选择对应的生成方法或直接使用提供的插值方法），如果你需要坐标轴或者更丰富的表现，你可以任意去组合他们。
                </p>
                <p>
                    具体写法请看具体章节，其中有细节描述，这里希望你可以大体了解clay的绘图思想。
                </p>
            </section>
            <section>
                <span class="title">开发流程</span>
                <p>
                    clay开发的初衷是降低数据可视化开发难度，提供更好、更灵活且跨浏览器的各种基本方法。
                </p>
                <p>
                    提供的方法大致可以分为：结点基本操作 + 结点数据操作 + 数值计算 + 视图 + 动画 + 绘图 + 比例尺。
                </p>
                <p>
                    使用这些相互独立的方法，配合使用，就可以绘制丰富的可视化效果，具体使用步骤（具体可自行调整）推荐如下：
                </p>
                <ul>
                    <li>1.准备好原始数据，如果需要应该借助比例尺，视图等对数据进行处理；</li>
                    <li>2.准备好画布，比如canvas2D或SVG等；</li>
                    <li>3.把数据使用data或datum绑定到绘制的目标结点，并进行一些设置；</li>
                    <li>4.使用绘图提供的接口，传入处理好的数据，在画布上进行绘制；</li>
                    <li>5.如果需要动画效果，使用动画提供的方法，配置动画（比如曲线某个结点数值改变了，整体曲线对应缓慢改变效果）。</li>
                </ul>
            </section>
            <section>
                <span class="title">写在最后</span>
                <p>
                    本文档对应的代码为clay-1.0.x.js，为非稳定阶段，不保证代码的可靠性很高，因为很多功能处于研发阶段，不过你在经过测试后仍然可以放心使用，此声明只是为了减低你的风险的友好提示！
                </p>
                <p>
                    欢迎任何人加入我们，加入我们请点击右边的『Form Me On Github』进入项目，在Github上帮助我们改进。
                </p>
            </section>
        </article>
        <footer>
            心叶 &copy;2007-2018 走一步，再走一步
        </footer>
    </section>
</body>

</html>