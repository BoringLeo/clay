/*!
*
* quickES - Help quickly use ES.
* https://github.com/yelloxing/quickES
* 
* author 心叶
*
* version 1.0.0
* 
* build 2018/07/29
*
* Copyright yelloxing
* Released under the MIT license
* 
**************************************************************
* 
*【内容】
*
* 1.不同浏览器兼容的常用方法
*
* 2.常用的自定义方法
*
* 【说明】
*
* 兼容不同浏览器的接口，提供常用的辅助方法，只是针对常用的，目标是轻量级。
*
* 【打包文件】
* (0)./src/core.js
* (1)./src/config.js
* (2)./src/animation.js
* (3)./src/math/interpolate/cardinal.js
* (4)./src/dom/sizzle.js
* (5)./src/dom/data.js
* (6)./src/dom/modify.js
* (7)./src/dom/search.js
* (8)./src/scale/linear.js
* (9)./src/layout/pie.js
* (10)./src/svg/arc.js
* (11)./src/svg/line.js
*
*/

!function(t,e,n){"use strict";if(t&&t.document)e(t);else{if("object"!=typeof module||"object"!=typeof module.exports)throw new Error("Unexcepted Error!");module.exports=e(t,!0)}}("undefined"!=typeof window?window:this,function(e,t){"use strict";var n={author:"心叶",email:"yelloxing@gmail.com"},o=e.quickES,i=e.$$;return n.noConflict=function(t){return e.$$===n&&(e.$$=i),t&&e.quickES===n&&(e.quickES=o),n},e.quickES=e.$$=n,n}),function(t,e){"use strict";t.quickES.namespace={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},t.quickES.svg={},t.quickES.math={}}("undefined"!=typeof window?window:this),function(t,e){"use strict";var l={timers:[],interval:13,speeds:400,timerId:null};t.quickES.animation=function(e,t,n){l.timer(function(t){e(t)},t,n)},l.timer=function(t,e,n){if(!t)throw new Error("tick is required!");e=e||l.speeds,l.timers.push({createTime:new Date,tick:t,duration:e,callback:n}),l.start()},l.start=function(){l.timerId||(l.timerId=setInterval(l.tick,l.interval))},l.tick=function(){var t,e,n,o,i,r,s,c=l.timers;for(l.timers=[],e=l.timers.length=0;e<c.length;e++)t=(i=c[e]).createTime,n=i.tick,r=i.duration,o=i.callback,!1,1<=(s=(+new Date-t)/r)&&!0,n(100*(s=1<s?1:s)),s<1?l.timers.push(i):o&&o();l.timers.length<=0&&l.stop()},l.stop=function(){l.timerId&&(clearInterval(l.timerId),console.error(l.timerId),l.timerId=null)}}("undefined"!=typeof window?window:this),function(t,e){"use strict";t.quickES.math.cardinal=function(){var u={u:.5,M:[[2,-2,1,1],[-3,3,-2,-1],[0,0,1,0],[1,0,0,0]]},h=function(t){if(u.MR){var e=(t-u.a)/(u.b-u.a),n=e*e;return(e*n*u.MR[0]+n*u.MR[1]+e*u.MR[2]+u.MR[3])*(u.b-u.a)}throw new Error("You shoud first set the position!")};return h.setU=function(t){if("number"!=typeof t)throw new Error("Unsupported data!");return u.u=.5*(1-t),h},h.setPs=function(t,e,n,o,i,r,s,c){if(!(t<=n&&n<i&&i<=s))throw new Error("Unsupported data!");u.a=n,u.b=i;var l=u.u*(r-e)/(i-t),a=u.u*(c-o)/(s-n);return o/=i-n,r/=i-n,u.MR=[2*o-2*r+l+a,3*r-3*o-2*l-a,l,o],h},h}}("undefined"!=typeof window?window:this),function(t,r,e){"use strict";r.node=function(){this.eq=function(t){return this.collection=this.size>t?[this.collection[t]]:[],this.size=this.collection.length,this},this.setEnvironment=function(t){return this.namespace=t,this},this.clone=function(){var t=new r.node;for(var e in this)try{this.hasOwnProperty(e)&&(t[e]=this[e])}catch(t){throw new Error("Illegal property value！")}return t}},r.selectAll=function(t,e){var n,o,i=new r.node;if(t=t||"",i.content=e||document,i.collection=[],i.namespace="html","string"==typeof t)if(t=(t+"").trim().replace(/[\n\f\r]/g,""),/^#[\d\w_]+$/.test(t))(o=i.content.getElementById(t.replace(/^#/,"")))&&i.collection.push(o);else{if(!/^[\d\w_]+$/.test(t))throw new Error("Unsupported selector!");for(o=i.content.getElementsByTagName(t),n=0;n<o.length;n++)i.collection.push(o[n])}else if(t.constructor===Array)for(n=0;n<t.length;n++)1===t[n].nodeType||9===t[n].nodeType||11===t[n].nodeType?i.collection.push(t[n]):console.warn("The existence of elements of non - node types!");else{if(1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw new Error("Unexcepted Error!");i.collection.push(t)}return i.size=i.collection.length,i.selector=(this.selector?this.selector:"")+'selectAll("'+t+'")',i}}(window,window.quickES),function(t,e,n){"use strict";e.node.prototype.datum=function(t,e){var n;if(t){for(t="function"==typeof e?e(t):t,n=0;n<this.size;n++)this.collection[n]._data=t;return this}return this.collection[0]?this.collection[0]._data:void 0},e.node.prototype.data=function(t,e){var n,o;if(t){if(t.constructor===Array){for(this._collection={datas:t,calc:e},n=0;n<this.size&&n<t.length;n++)this.collection[n]._data="function"==typeof e?e(t[n],n):t[n];return this}throw new Error("Unsupported data!")}for(o=[],n=0;n<this.size;n++)o[n]=this.collection[n]._data;return o},e.node.prototype.enter=function(){var t;for(this._collection.enter=[],t=this.size;t<this._collection.datas.length;t++)this._collection.enter.push("function"==typeof this._collection.calc?this._collection.calc(this._collection.datas[t]):this._collection.datas[t]);return this.selector+=":enter()",this},e.node.prototype.exit=function(){var t,e=this.collection;for(this.collection=[],t=this._collection.datas.length;t<this.size;t++)this.collection.push(e[t]);return this.size=this.collection.length,this.selector+=":exit()",this}}(window,window.quickES),function(t,o,e){"use strict";var i=function(t,e){if(e&&(1===e.nodeType||11===e.nodeType||9===e.nodeType))return e;if(!e||"string"!=typeof e)throw new Error("Unexcepted Error!");return/^[\w\d-]+$/.test(e)?"svg"===t?document.createElementNS(o.namespace.svg,e):document.createElement(e):((n="svg"===t?document.createElementNS(o.namespace.svg,"svg"):document.createElement("div")).innerHTML=e,o.selectAll(n).children().collection[0]);var n};o.node.prototype.append=function(t){var e,n;if(this._collection&&this._collection.enter){for(e=0;e<this._collection.enter.length;e++)(n=i(this.namespace,t))._data=this._collection.enter[e],o.selectAll(this.content).append(n),this.collection.push(n);delete this._collection,this.size=this.collection.length}else for(e=0;e<this.size;e++)n=i(this.namespace,t),this.collection[e].appendChild(n);return this},o.node.prototype.prepend=function(t){var e,n;if(this._collection&&this._collection.enter){for(e=0;e<this._collection.enter.length;e++)(n=i(this.namespace,t))._data=this._collection.enter[e],o.selectAll(this.content).prepend(n),this.collection.push(n);delete this._collection,this.size=this.collection.length}else for(e=0;e<this.size;e++)n=i(this.namespace,t),this.collection[e].insertBefore(n,this.clone().eq(e).children().collection[0]);return this},o.node.prototype.after=function(t){var e,n;if(this._collection&&this._collection.enter){for(e=0;e<this._collection.enter.length;e++)(n=i(this.namespace,t))._data=this._collection.enter[e],o.selectAll(this.content).after(n),this.collection.push(n);delete this._collection,this.size=this.collection.length}else for(e=0;e<this.size;e++)n=i(this.namespace,t),this.clone().eq(e).parent().collection[0].insertBefore(n,this.clone().eq(e).next().collection[0]);return this},o.node.prototype.before=function(t){var e,n;if(this._collection&&this._collection.enter){for(e=0;e<this._collection.enter.length;e++)(n=i(this.namespace,t))._data=this._collection.enter[e],o.selectAll(this.content).before(n),this.collection.push(n);delete this._collection,this.size=this.collection.length}else for(e=0;e<this.size;e++)n=i(this.namespace,t),this.clone().eq(e).parent().collection[0].insertBefore(n,this.collection[e]);return this},o.node.prototype.remove=function(){var t;for(t=0;t<this.size;t++)this.clone().eq(t).parent().collection[0].removeChild(this.collection[t]);return this},o.node.prototype.empty=function(){var t;for(t=0;t<this.size;t++)this.collection[t].innerHTML="";return this},o.node.prototype.attr=function(t,e){if(t&&"string"==typeof t){if(null==e)return 0<this.size?this.collection[0].getAttribute(t):void 0;var n;for(n=0;n<this.size;n++)this.collection[n].setAttribute(t,"function"==typeof e?e(this.collection[n]._data,n):e);return this}throw new Error("The name is invalid!")}}(window,window.quickES),function(t,n,e){"use strict";n.node.prototype.selectAll=function(t){var e=n.selectAll(t,0<this.size?this.collection[0]:this.content);return e.namespace=this.namespace,e},n.node.prototype.parent=function(t){var e,n,o=this.collection;for(this.collection=[],e=0;e<this.size;e++)(n=o[e].parentNode)&&("function"!=typeof t||t(n,e))&&this.collection.push(n);return this.size=this.collection.length,this.selector+=":parent()",this},n.node.prototype.children=function(t){var e,n,o=this.collection;for(this.collection=[],n=o[0]?o[0].childNodes:[],e=0;e<n.length;e++)1!==n[e].nodeType&&11!==n[e].nodeType&&9!==n[e].nodeType||("function"!=typeof t||t(n[e]))&&this.collection.push(n[e]);return this.size=this.collection.length,this.selector+=":children()",this},n.node.prototype.next=function(t){var e,n,o=this.collection;for(this.collection=[],e=0;e<this.size;e++){for(n=o[e].nextSibling;n&&1!==n.nodeType&&11!==n.nodeType&&9!==n.nodeType&&n.nextSibling;)n=n.nextSibling;!n||1!==n.nodeType&&11!==n.nodeType&&9!==n.nodeType||("function"!=typeof t||t(n,e))&&this.collection.push(n)}return this.size=this.collection.length,this.selector+=":next()",this},n.node.prototype.prev=function(t){var e,n,o=this.collection;for(this.collection=[],e=0;e<this.size;e++){for(n=o[e].previousSibling;n&&1!==n.nodeType&&11!==n.nodeType&&9!==n.nodeType&&n.previousSibling;)n=n.previousSibling;!n||1!==n.nodeType&&11!==n.nodeType&&9!==n.nodeType||("function"!=typeof t||t(n,e))&&this.collection.push(n)}return this.size=this.collection.length,this.selector+=":prev()",this}}(window,window.quickES),function(t,e){"use strict";t.quickES.scaleLinear=function(){var e={};function t(t){if("number"==typeof t){if(e.scaleCalc)return t<=e.domains[0]?e.ranges[0]:t>=e.domains[1]?e.ranges[1]:(t-e.domains[0])*e.scaleCalc+e.ranges[0];throw new Error("You shoud first set the domain and range!")}throw new Error("A number is required!")}return t.domain=function(t){if(!t||t.constructor!==Array||"number"!=typeof t[0]||"number"!=typeof t[1])throw new Error("Unsupported data!");return e.domains=t,e.ranges&&(e.scaleCalc=(e.ranges[1]-e.ranges[0])/(e.domains[1]-e.domains[0])),this},t.range=function(t){if(!t||t.constructor!==Array||"number"!=typeof t[0]||"number"!=typeof t[1])throw new Error("Unsupported data!");return e.ranges=t,e.domains&&(e.scaleCalc=(e.ranges[1]-e.ranges[0])/(e.domains[1]-e.domains[0])),this},t}}("undefined"!=typeof window?window:this),function(t,e){"use strict";t.quickES.pieLayout=function(){var r={rotate:0},e=function(t){if(r.valueback){if(t&&t.constructor===Array){var e,n,o=[],i=0;for(e=0;e<t.length;e++)o.push({data:t[e],value:r.valueback(t[e],e)}),i+=o[e].value;for(e=0;e<t.length;e++)n=o[e].value/i*Math.PI*2,o[e].startAngle=0==e?r.rotate:o[e-1].endAngle,o[e].endAngle=o[e].startAngle+n,o[e].angle=n;return o}throw new Error("Unsupported data!")}throw new Error("You shoud first set the valueback!")};return e.rotate=function(t){if("number"!=typeof t)throw new Error("Unsupported data!");return r.rotate=t%(2*Math.PI),e},e.value=function(t){if("function"!=typeof t)throw new Error("Unsupported data!");return r.valueback=t,e},e}}("undefined"!=typeof window?window:this),function(t,e){"use strict";t.quickES.svg.arc=function(){var f={innerRadius:0,outerRadius:10},e=function(t){var e=Math.sin(t.startAngle),n=Math.sin(t.endAngle),o=Math.cos(t.startAngle),i=Math.cos(t.endAngle),r=o*f.innerRadius+f.outerRadius,s=e*f.innerRadius+f.outerRadius,c=(1+o)*f.outerRadius,l=(1+e)*f.outerRadius,a=i*f.innerRadius+f.outerRadius,u=n*f.innerRadius+f.outerRadius,h=(1+i)*f.outerRadius,d=(1+n)*f.outerRadius,p=t.angle>Math.PI?1:0;return"M"+r+" "+s+"L"+c+" "+l+"A"+f.outerRadius+" "+f.outerRadius+" 0 "+p+" 1 "+h+" "+d+"L"+a+" "+u+"A"+f.innerRadius+" "+f.innerRadius+" 0 "+p+" 0 "+r+" "+s};return e.innerRadius=function(t){if(!("number"==typeof t&&t<f.outerRadius))throw new Error("Unsupported data!");return f.innerRadius=t,e},e.outerRadius=function(t){if(!("number"==typeof t&&t>f.innerRadius))throw new Error("Unsupported data!");return f.outerRadius=t,e},e}}("undefined"!=typeof window?window:this),function(h,t){"use strict";h.quickES.svg.line=function(){var u={interpolate:"line",dis:5,t:0},e=function(t){if(t&&t.constructor===Array&&2<=t.length){var e="M"+u.xback(t[0],0)+" "+u.yback(t[0],0);if("line"==u.interpolate){var n;for(e+="L",n=1;n<t.length;n++)e+=u.xback(t[n],n)+" "+u.yback(t[n],n)+",";e=e.replace(/,$/,"")}else{if("cardinal"!=u.interpolate)throw new Error("Unsupported interpolate!");var o,i,r;for(e+="L",o=0;o<t.length-1;o++){var s=[u.xback(t[o],o),u.yback(t[o],o)],c=[u.xback(t[o+1],o+1),u.yback(t[o+1],o+1)],l=0==o?s:[u.xback(t[o-1],o-1),u.yback(t[o-1],o-1)],a=o>=t.length-2?c:[u.xback(t[o+2],o+2),u.yback(t[o+2],o+2)];for(r=h.quickES.math.cardinal().setU(u.t).setPs(l[0],l[1],s[0],s[1],c[0],c[1],a[0],a[1]),i=s[0];i<c[0];i+=u.dis)e+=i+" "+r(i)+",";e+=c[0]+" "+r(c[0])+","}e=e.replace(/,$/,"")}return e}throw new Error("Unsupported data!")};return e.setT=function(t){if("number"!=typeof t)throw new Error("Unsupported data!");return u.t=t,e},e.setPrecision=function(t){if("number"!=typeof t)throw new Error("Unsupported data!");return u.dis=t,e},e.interpolate=function(t){return u.interpolate=t,e},e.x=function(t){if("function"!=typeof t)throw new Error("Unsupported data!");return u.xback=t,e},e.y=function(t){if("function"!=typeof t)throw new Error("Unsupported data!");return u.yback=t,e},e}}("undefined"!=typeof window?window:this);