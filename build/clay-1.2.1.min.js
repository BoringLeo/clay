/*!
*
* clay - Provide more flexible data visualization solutions!
* git+https://github.com/yelloxing/clay.git
* 
* author 心叶
*
* version 1.2.1
* 
* build Sun Jul 29 2018
*
* Copyright yelloxing
* Released under the MIT license
* 
* Date:Sun Sep 02 2018 00:48:31 GMT+0800 (CST)
*/

!function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e(t):e(t)}("undefined"!=typeof window?window:this,function(t,o){"use strict";var y=function(t,e){return new y.prototype.init(t,e)};y.prototype.init=function(e,t){if("function"==typeof e)y.__isLoad__?e():document.addEventListener?document.addEventListener("DOMContentLoaded",function t(){document.removeEventListener("DOMContentLoaded",t,!1),e(),y.__isLoad__=!0}):document.attachEvent&&document.attachEvent("onreadystatechange",function t(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",t),e(),y.__isLoad__=!0)});else{this.context=t=t||document;var n,r=s(e,t);for(n=0;n<r.length;n++)this[n]=r[n];this.length=r.length}return this},y.prototype.init.prototype=y.prototype;var i={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},w={whitespace:"[\\x20\\t\\r\\n\\f]",identifier:"(?:\\\\.|[\\w-]|[^\0-\\xa0])+"};y.math={},y.svg={},y.canvas={},y.layout={};var h=["href","title","show","type","role","actuate"];function s(t,e){var n,r=[];if("string"!=typeof t){if(!t||1!==t.nodeType&&11!==t.nodeType&&9!==t.nodeType){if(!t||t.constructor!==Array&&t.constructor!==HTMLCollection&&t.constructor!==NodeList)return t&&t.constructor===y?t:[];for(n=0;n<t.length;n++)!t[n]||1!==t[n].nodeType&&11!==t[n].nodeType&&9!==t[n].nodeType||r.push(t[n]);return r}return[t]}if("*"===(t=(t+"").trim().replace(/[\n\f\r]/g,"")))return e.getElementsByTagName("*");var o=w.whitespace,i=w.identifier,h="\\["+o+"{0,}"+i+"(?:"+o+"{0,}="+o+"{0,}(\\'|\\\"){0,1}"+i+"\\1{0,1}){0,1}"+o+"{0,}\\]";if(new RegExp("^(?:"+i+"){0,1}(?:(?:#|\\.)"+i+"|"+h+"){0,}$").test(t)){var s,a=t.match(new RegExp("#"+i,"g")),u=t.match(new RegExp("\\."+i,"g")),f=t.match(new RegExp("^"+i)),p=t.match(new RegExp(h,"g"));if(a){if(1<a.length)return[];s=(s=document.getElementById((a.shift(0)+"").replace(/^#/,"")))?[s]:[]}else s=e.getElementsByClassName&&u?e.getElementsByClassName((u.shift(0)+"").replace(/^\./,"")):f?e.getElementsByTagName(f.shift(0)):e.getElementsByTagName("*");var c,l,d,g,m=new RegExp("^\\["+o+"{0,}("+i+")(?:"+o+"{0,}="+o+"{0,}(?:\\'|\\\"){0,1}("+i+")(?:\\'|\\\"){0,1}){0,1}"+o+"{0,}\\]$");for(n=0;n<s.length;n++)if(g=!0,!(f&&0<f.length&&(f[0]+"").toUpperCase()!==(s[n].tagName+"").toUpperCase())){for(c=" "+s[n].getAttribute("class")+" ",l=0;g&&u&&l<u.length;l++)if(c.search(" "+(u[l]+"").replace(/\./,"")+" ")<0){g=!1;break}for(l=0;g&&p&&l<p.length;l++)if(c=m.exec(p[l]),null===(d=s[n].getAttribute(c[1]))||c[2]&&d!=c[2]){g=!1;break}g&&r.push(s[n])}return r}try{return[v(t)]}catch(t){return[]}}function v(t){var e=document.createElementNS(i.svg,"svg");new RegExp("^"+w.identifier+"$").test(t)&&(t="<"+t+"></"+t+">"),e.innerHTML=t;var n,r,o=e.childNodes;for(n=0;n<o.length;n++)if(1===o[n].nodeType||9===o[n].nodeType||11===o[n].nodeType){r=o[n];break}if(/[A-Z]/.test(r.tagName))for((e=document.createElement("div")).innerHTML=t,o=e.childNodes,n=0;n<o.length;n++)if(1===o[n].nodeType||9===o[n].nodeType||11===o[n].nodeType){r=o[n];break}return r}return y.prototype.find=function(t){if(this.length<=0)return y();var e,n=y(),r=s(t,this[0]);for(e=0;e<r.length;e++)n[e]=r[e],n.length+=1;return n},y.prototype.eq=function(t){return this.length<=t?new y:new y(this[t])},y.prototype.appendTo=function(t){var e,n,r=y(t);for(e=0;e<r.length;e++)for(n=0;n<this.length;n++)r[e].appendChild(this[n]);return this},y.prototype.remove=function(){var t;for(t=0;t<this.length;t++)this[t].parentNode.removeChild(this[t]);return this},y.prototype.attr=function(t,e){if(null==e||e==o)return 0<this.length?this[0].getAttribute(t):o;var n,r;for(n=0;n<this.length;n++)r="function"==typeof e?e(this[n]._data,n):e,/[A-Z]/.test(this[n].tagName)&&0<=h.indexOf(t)?this[n].setAttributeNS(i.xlink,"xlink:"+t,r):this[n].setAttribute(t,r);return this},y.prototype.datum=function(t,e){if(null===t||t===o)return 0<this.length?this[0]._data:o;var n;for(t="function"==typeof e?e(t):t,n=0;n<this.length;n++)this[n]._data=t;return this},y.prototype.data=function(t,e){var n,r=[];if(t&&t.constructor===Array){var o=y();for(n=0;n<t.length&&n<this.length;n++)this[n]._data="function"==typeof e?e(t[n]):t[n],o[n]=this[n],o.length+=1;for(o._enter=[];n<t.length;n++)o._enter.push("function"==typeof e?e(t[n]):t[n]);for(o._exit=[];n<this.length;n++)o._exit.push(this[n]);return o}for(n=0;n<this.length;n++)r[n]=this[n]._data;return r},y.prototype.enter=function(t){var e,n,r=y();for(e=0;this._enter&&e<this._enter.length;e++)(n=v(t))._data=this._enter[e],r[e]=n,r.length+=1;return delete this._enter,r},y.prototype.exit=function(){var t,e=y();for(t=0;this._exit&&t<this._exit.length;t++)e[t]=this._exit[t],e.length+=1;return delete this._exit,e},y.math.hermite=function(){var a={u:.5},u=function(t){if(a.MR){var e=(t-a.a)/(a.b-a.a),n=e*e;return(e*n*a.MR[0]+n*a.MR[1]+e*a.MR[2]+a.MR[3])*(a.b-a.a)}throw new Error("You shoud first set the position!")};return u.setU=function(t){if("number"!=typeof t)throw new Error("Unsupported data!");return a.u=.5*(1-t),u},u.setP=function(t,e,n,r,o,i){if(!(t<n))throw new Error("Unsupported data!");a.a=t,a.b=n;var h=a.u*o,s=a.u*i;return e/=n-t,r/=n-t,a.MR=[2*e-2*r+h+s,3*r-3*e-2*h-s,h,e],u},u},y.math.cardinal=function(){var e,o={t:0},i=function(t){if(o.hs){for(e=-1;e+1<o.hs.x.length&&(t>o.hs.x[e+1]||-1==e&&t>=o.hs.x[e+1]);)e+=1;if(-1==e||e>=o.hs.h.length)throw new Error("Coordinate crossing!");return o.hs.h[e](t)}throw new Error("You shoud first set the position!")};return i.setU=function(t){if("number"!=typeof t)throw new Error("Unsupported data!");return o.t=t,i},i.setP=function(){o.hs={x:[],h:[]};var t,e,n=arguments,r=(n[1][1]-n[0][1])/(n[1][0]-n[0][0]);for(o.hs.x[0]=n[0][0],t=1;t<n.length;t++){if(n[t][0]<=n[t-1][0])throw new Error("The point position should be increamented!");o.hs.x[t]=n[t][0],e=t<n.length-1?(n[t+1][1]-n[t-1][1])/(n[t+1][0]-n[t-1][0]):(n[t][1]-n[t-1][1])/(n[t][0]-n[t-1][0]),o.hs.h[t-1]=y.math.hermite().setU(o.t).setP(n[t-1][0],n[t-1][1],n[t][0],n[t][1],r,e),r=e}return i},i},y.__isLoad__=!1,y.author="心叶",y.email="yelloxing@gmail.com",y.version="1.2.1",t.clay=t.$$=y,y});