/*!
*
* clay - Provide more flexible data visualization solutions!
* git+https://github.com/yelloxing/clay.git
* 
* author 心叶
*
* version 1.2.1
* 
* build Sun Jul 29 2018
*
* Copyright yelloxing
* Released under the MIT license
* 
* Date:Sun Sep 02 2018 17:05:40 GMT+0800 (CST)
*/

!function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e(t):e(t)}("undefined"!=typeof window?window:this,function(t,o){"use strict";var w=function(t,e){return new w.prototype.init(t,e)};w.prototype.init=function(e,t){if("function"==typeof e)w.__isLoad__?e():document.addEventListener?document.addEventListener("DOMContentLoaded",function t(){document.removeEventListener("DOMContentLoaded",t,!1),e(),w.__isLoad__=!0}):document.attachEvent&&document.attachEvent("onreadystatechange",function t(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",t),e(),w.__isLoad__=!0)});else{this.context=t=t||document;var r,n=s(e,t);for(r=0;r<n.length;r++)this[r]=n[r];this.length=n.length}return this},w.prototype.init.prototype=w.prototype;var i={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},y={whitespace:"[\\x20\\t\\r\\n\\f]",identifier:"(?:\\\\.|[\\w-]|[^\0-\\xa0])+"};w.math={},w.svg={},w.canvas={},w.webgl={},w.layout={};var u=["href","title","show","type","role","actuate"];function s(t,e){var r,n=[];if("string"!=typeof t){if(!t||1!==t.nodeType&&11!==t.nodeType&&9!==t.nodeType){if(!t||t.constructor!==Array&&t.constructor!==HTMLCollection&&t.constructor!==NodeList)return t&&t.constructor===w?t:[];for(r=0;r<t.length;r++)!t[r]||1!==t[r].nodeType&&11!==t[r].nodeType&&9!==t[r].nodeType||n.push(t[r]);return n}return[t]}if("*"===(t=(t+"").trim().replace(/[\n\f\r]/g,"")))return e.getElementsByTagName("*");var o=y.whitespace,i=y.identifier,u="\\["+o+"{0,}"+i+"(?:"+o+"{0,}="+o+"{0,}(\\'|\\\"){0,1}"+i+"\\1{0,1}){0,1}"+o+"{0,}\\]";if(new RegExp("^(?:"+i+"){0,1}(?:(?:#|\\.)"+i+"|"+u+"){0,}$").test(t)){var s,h=t.match(new RegExp("#"+i,"g")),a=t.match(new RegExp("\\."+i,"g")),f=t.match(new RegExp("^"+i)),p=t.match(new RegExp(u,"g"));if(h){if(1<h.length)return[];s=(s=document.getElementById((h.shift(0)+"").replace(/^#/,"")))?[s]:[]}else s=e.getElementsByClassName&&a?e.getElementsByClassName((a.shift(0)+"").replace(/^\./,"")):f?e.getElementsByTagName(f.shift(0)):e.getElementsByTagName("*");var c,d,l,g,m=new RegExp("^\\["+o+"{0,}("+i+")(?:"+o+"{0,}="+o+"{0,}(?:\\'|\\\"){0,1}("+i+")(?:\\'|\\\"){0,1}){0,1}"+o+"{0,}\\]$");for(r=0;r<s.length;r++)if(g=!0,!(f&&0<f.length&&(f[0]+"").toUpperCase()!==(s[r].tagName+"").toUpperCase())){for(c=" "+s[r].getAttribute("class")+" ",d=0;g&&a&&d<a.length;d++)if(c.search(" "+(a[d]+"").replace(/\./,"")+" ")<0){g=!1;break}for(d=0;g&&p&&d<p.length;d++)if(c=m.exec(p[d]),null===(l=s[r].getAttribute(c[1]))||c[2]&&l!=c[2]){g=!1;break}g&&n.push(s[r])}return n}try{return[v(t)]}catch(t){return[]}}function v(t){var e=document.createElementNS(i.svg,"svg");new RegExp("^"+y.identifier+"$").test(t)&&(t="<"+t+"></"+t+">"),e.innerHTML=t;var r,n,o=e.childNodes;for(r=0;r<o.length;r++)if(1===o[r].nodeType||9===o[r].nodeType||11===o[r].nodeType){n=o[r];break}if(/[A-Z]/.test(n.tagName))for((e=document.createElement("div")).innerHTML=t,o=e.childNodes,r=0;r<o.length;r++)if(1===o[r].nodeType||9===o[r].nodeType||11===o[r].nodeType){n=o[r];break}return n}return w.prototype.find=function(t){if(this.length<=0)return w();var e,r=w(),n=s(t,this[0]);for(e=0;e<n.length;e++)r[e]=n[e],r.length+=1;return r},w.prototype.eq=function(t){return this.length<=t?new w:new w(this[t])},w.prototype.appendTo=function(t){var e,r,n=w(t);for(e=0;e<n.length;e++)for(r=0;r<this.length;r++)n[e].appendChild(this[r]);return this},w.prototype.remove=function(){var t;for(t=0;t<this.length;t++)this[t].parentNode.removeChild(this[t]);return this},w.prototype.attr=function(t,e){if(null==e||e==o)return 0<this.length?this[0].getAttribute(t):o;var r,n;for(r=0;r<this.length;r++)n="function"==typeof e?e(this[r]._data,r):e,/[A-Z]/.test(this[r].tagName)&&0<=u.indexOf(t)?this[r].setAttributeNS(i.xlink,"xlink:"+t,n):this[r].setAttribute(t,n);return this},w.prototype.datum=function(t,e){if(null===t||t===o)return 0<this.length?this[0]._data:o;var r;for(t="function"==typeof e?e(t):t,r=0;r<this.length;r++)this[r]._data=t;return this},w.prototype.data=function(t,e){var r,n=[];if(t&&t.constructor===Array){var o=w();for(r=0;r<t.length&&r<this.length;r++)this[r]._data="function"==typeof e?e(t[r]):t[r],o[r]=this[r],o.length+=1;for(o._enter=[];r<t.length;r++)o._enter.push("function"==typeof e?e(t[r]):t[r]);for(o._exit=[];r<this.length;r++)o._exit.push(this[r]);return o}for(r=0;r<this.length;r++)n[r]=this[r]._data;return n},w.prototype.enter=function(t){var e,r,n=w();for(e=0;this._enter&&e<this._enter.length;e++)(r=v(t))._data=this._enter[e],n[e]=r,n.length+=1;return delete this._enter,n},w.prototype.exit=function(){var t,e=w();for(t=0;this._exit&&t<this._exit.length;t++)e[t]=this._exit[t],e.length+=1;return delete this._exit,e},w.math.hermite=function(){var h={u:.5},a=function(t){if(h.MR){var e=(t-h.a)/(h.b-h.a),r=e*e;return(e*r*h.MR[0]+r*h.MR[1]+e*h.MR[2]+h.MR[3])*(h.b-h.a)}throw new Error("You shoud first set the position!")};return a.setU=function(t){if("number"!=typeof t)throw new Error("Unsupported data!");return h.u=.5*(1-t),a},a.setP=function(t,e,r,n,o,i){if(!(t<r))throw new Error("Unsupported data!");h.a=t,h.b=r;var u=h.u*o,s=h.u*i;return e/=r-t,n/=r-t,h.MR=[2*e-2*n+u+s,3*n-3*e-2*u-s,u,e],a},a},w.math.cardinal=function(){var e,o={t:0},i=function(t){if(o.hs){for(e=-1;e+1<o.hs.x.length&&(t>o.hs.x[e+1]||-1==e&&t>=o.hs.x[e+1]);)e+=1;if(-1==e||e>=o.hs.h.length)throw new Error("Coordinate crossing!");return o.hs.h[e](t)}throw new Error("You shoud first set the position!")};return i.setU=function(t){if("number"!=typeof t)throw new Error("Unsupported data!");return o.t=t,i},i.setP=function(){o.hs={x:[],h:[]};var t,e,r=arguments,n=(r[1][1]-r[0][1])/(r[1][0]-r[0][0]);for(o.hs.x[0]=r[0][0],t=1;t<r.length;t++){if(r[t][0]<=r[t-1][0])throw new Error("The point position should be increamented!");o.hs.x[t]=r[t][0],e=t<r.length-1?(r[t+1][1]-r[t-1][1])/(r[t+1][0]-r[t-1][0]):(r[t][1]-r[t-1][1])/(r[t][0]-r[t-1][0]),o.hs.h[t-1]=w.math.hermite().setU(o.t).setP(r[t-1][0],r[t-1][1],r[t][0],r[t][1],n,e),n=e}return i},i},w.math.rotate=function(){var n=function(){};return n.setL=function(){return n},n.setP=function(t,e,r){if("number"!=typeof t||"number"!=typeof e)throw new Error("Unsupported data!");return"number"!=typeof r&&(r=0),n},n},w.math.move=function(){var o={},i=function(t,e){if(o.D&&o.P){if("number"!=typeof t)throw new Error("Unsupported data!");var r=[o.D[0]*t+o.P[0],o.D[1]*t+o.P[1],o.D[2]*t+o.P[2]];return e?(o.P=r,i):r}throw new Error("You shoud first set the direction and position!")};return i.setP=function(t,e,r){if("number"!=typeof t||"number"!=typeof e)throw new Error("Unsupported data!");return"number"!=typeof r&&(r=0),o.P=[t,e,r],i},i.setD=function(t,e,r){if("number"!=typeof t||"number"!=typeof e)throw new Error("Unsupported data!");if("number"!=typeof r&&(r=0),0==t&&0==e&&0==r)o.D=[0,0,0];else{var n=Math.sqrt(t*t+e*e+r*r);o.D=[t/n,e/n,r/n]}return i},i},w.math.scale=function(){var n={},o=function(t,e){if(n.C&&n.P){if("number"!=typeof t)throw new Error("Unsupported data!");var r=[t*(n.P[0]-n.C[0])+n.C[0],t*(n.P[1]-n.C[1])+n.C[1],t*(n.P[2]-n.C[2])+n.C[2]];return e?(n.P=r,o):r}throw new Error("You shoud first set the center and position!")};return o.setC=function(t,e,r){if("number"!=typeof t||"number"!=typeof e)throw new Error("Unsupported data!");return"number"!=typeof r&&(r=0),n.C=[t,e,r],o},o.setP=function(t,e,r){if("number"!=typeof t||"number"!=typeof e)throw new Error("Unsupported data!");return"number"!=typeof r&&(r=0),n.P=[t,e,r],o},o},w.__isLoad__=!1,w.author="心叶",w.email="yelloxing@gmail.com",w.version="1.2.1",t.clay=t.$$=w,w});