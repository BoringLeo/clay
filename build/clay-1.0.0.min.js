/*!
*
* clay - Provide more flexible data visualization solutions!
* git+https://github.com/yelloxing/clay.git
* 
* author 心叶
*
* version 1.0.0
* 
* build 2018/07/29
*
* Copyright yelloxing
* Released under the MIT license
* 
**************************************************************
*
* (0)./src/core.js
* (1)./src/config.js
* (2)./src/animation.js
* (3)./src/math/interpolate/cardinal.js
* (4)./src/math/ease.js
* (5)./src/dom/sizzle.js
* (6)./src/dom/data.js
* (7)./src/dom/modify.js
* (8)./src/dom/search.js
* (9)./src/dom/size.js
* (10)./src/scale/linear.js
* (11)./src/layout/pie.js
* (12)./src/animation/port.js
* (13)./src/animation/attr.js
* (14)./src/svg/arc.js
* (15)./src/svg/line.js
*
*/

!function(t,e,n){"use strict";if(t&&t.document)e(t);else{if("object"!=typeof module||"object"!=typeof module.exports)throw new Error("Unexcepted Error!");module.exports=e(t,!0)}}("undefined"!=typeof window?window:this,function(n,t){"use strict";var o=function(e,t){return"function"==typeof e?(o.__isLoad__?e():document.addEventListener?document.addEventListener("DOMContentLoaded",function t(){document.removeEventListener("DOMContentLoaded",t,!1),e(),o.__isLoad__=!0}):document.attachEvent&&document.attachEvent("onreadystatechange",function t(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",t),e(),o.__isLoad__=!0)}),n.clay):n.clay.selectAll(e,t)};o.author="心叶",o.email="yelloxing@gmail.com";var e=n.clay,i=n.$$;return o.noConflict=function(t){return n.$$===o&&(n.$$=i),t&&n.clay===o&&(n.clay=e),o},o.__isLoad__=!1,n.clay=n.$$=o,o}),function(t,e){"use strict";t.clay.namespace={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},t.clay.svg={},t.clay.math={}}("undefined"!=typeof window?window:this),function(t,e){"use strict";var a={timers:[],interval:13,speeds:400,timerId:null};t.clay.animation=function(e,t,n){a.timer(function(t){e(t)},t,n)},a.timer=function(t,e,n){if(!t)throw new Error("tick is required!");e=e||a.speeds,a.timers.push({createTime:new Date,tick:t,duration:e,callback:n}),a.start()},a.start=function(){a.timerId||(a.timerId=setInterval(a.tick,a.interval))},a.tick=function(){var t,e,n,o,i,r,c,s=a.timers;for(a.timers=[],e=a.timers.length=0;e<s.length;e++)t=(i=s[e]).createTime,n=i.tick,r=i.duration,o=i.callback,!1,1<=(c=(+new Date-t)/r)&&!0,n(100*(c=1<c?1:c)),c<1?a.timers.push(i):o&&o();a.timers.length<=0&&a.stop()},a.stop=function(){a.timerId&&(clearInterval(a.timerId),a.timerId=null)}}("undefined"!=typeof window?window:this),function(t,e){"use strict";t.clay.math.cardinal=function(){var u={u:.5,M:[[2,-2,1,1],[-3,3,-2,-1],[0,0,1,0],[1,0,0,0]]},h=function(t){if(u.MR){var e=(t-u.a)/(u.b-u.a),n=e*e;return(e*n*u.MR[0]+n*u.MR[1]+e*u.MR[2]+u.MR[3])*(u.b-u.a)}throw new Error("You shoud first set the position!")};return h.setU=function(t){if("number"!=typeof t)throw new Error("Unsupported data!");return u.u=.5*(1-t),h},h.setPs=function(t,e,n,o,i,r,c,s){if(!(t<=n&&n<i&&i<=c))throw new Error("Unsupported data!");u.a=n,u.b=i;var a=u.u*(r-e)/(i-t),l=u.u*(s-o)/(c-n);return o/=i-n,r/=i-n,u.MR=[2*o-2*r+a+l,3*r-3*o-2*a-l,a,o],h},h}}("undefined"!=typeof window?window:this),function(i,t){"use strict";i.clay.math.ease=function(t){var e=/^cubic-bezier\( *(-?\d*\.?\d+) *, *(-?\d*\.?\d+) *, *(-?\d*\.?\d+) *, *(-?\d*\.?\d+) *\)$/,n={ease:"cubic-bezier(0.25, 0.1, 0.25, 1.01)","ease-in":"cubic-bezier(0.42, 0, 1, 1)","ease-in-out":"cubic-bezier(0.42, 0, 0.57, 1.01)","ease-out":"cubic-bezier(0, 0, 0.58, 1)"};if("linear"==(t=t.trim()))return function(t){return t};if(e.test(t)){var o=e.exec(t);return o[1]+=1,o[2]+=1,o[3]-=1,o[4]-=1,0<o[1]&&(o[1]=0,o[2]=o[2]-(1-o[2])*o[1]/(1-o[1])),o[3]<1&&(o[3]=1,o[4]=o[4]/o[3]),i.clay.math.cardinal().setU(-1).setPs(o[1],o[2],0,0,100,100,100*o[3],100*o[4])}return n[t]?i.clay.math.ease(n[t]):function(){return 100}}}("undefined"!=typeof window?window:this),function(t,r,e){"use strict";r.node=function(){this.eq=function(t){return this.collection=this.count>t?[this.collection[t]]:[],this.count=this.collection.length,this},this.setEnvironment=function(t){return this.namespace=t,this},this._animation={transition:!1,duration:400,ease:"linear",attrback:this.animation.attrback()},this.clone=function(){var t=new r.node;for(var e in this)try{this.hasOwnProperty(e)&&(t[e]=this[e])}catch(t){throw new Error("Illegal property value！")}return t}},r.selectAll=function(t,e){var n,o,i=new r.node;if(t=t||"",i.content=e||document,i.collection=[],i.namespace="html","string"==typeof t)if(t=(t+"").trim().replace(/[\n\f\r]/g,""),/^#[\d\w_]+$/.test(t))(o=i.content.getElementById(t.replace(/^#/,"")))&&i.collection.push(o);else{if(!/^[\d\w_]+$/.test(t))throw new Error("Unsupported selector!");for(o=i.content.getElementsByTagName(t),n=0;n<o.length;n++)i.collection.push(o[n])}else if(t.constructor===Array)for(n=0;n<t.length;n++)1===t[n].nodeType||9===t[n].nodeType||11===t[n].nodeType?i.collection.push(t[n]):console.warn("The existence of elements of non - node types!");else{if(1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw new Error("Unexcepted Error!");i.collection.push(t)}return i.count=i.collection.length,i.selector=(this.selector?this.selector:"")+'selectAll("'+t+'")',i}}(window,window.clay),function(t,e,n){"use strict";e.node.prototype.datum=function(t,e){var n;if(t){for(t="function"==typeof e?e(t):t,n=0;n<this.count;n++)this.collection[n]._data=t;return this}return this.collection[0]?this.collection[0]._data:void 0},e.node.prototype.data=function(t,e){var n,o;if(t){if(t.constructor===Array){for(this._collection={datas:t,calc:e},n=0;n<this.count&&n<t.length;n++)this.collection[n]._data="function"==typeof e?e(t[n],n):t[n];return this}throw new Error("Unsupported data!")}for(o=[],n=0;n<this.count;n++)o[n]=this.collection[n]._data;return o},e.node.prototype.enter=function(){var t;for(this._collection.enter=[],t=this.count;t<this._collection.datas.length;t++)this._collection.enter.push("function"==typeof this._collection.calc?this._collection.calc(this._collection.datas[t]):this._collection.datas[t]);return this.selector+=":enter()",this},e.node.prototype.exit=function(){var t,e=this.collection;for(this.collection=[],t=this._collection.datas.length;t<this.count;t++)this.collection.push(e[t]);return this.count=this.collection.length,this.selector+=":exit()",this}}(window,window.clay),function(t,o,r){"use strict";var i=function(t,e){if(e&&(1===e.nodeType||11===e.nodeType||9===e.nodeType))return e;if(!e||"string"!=typeof e)throw new Error("Unexcepted Error!");return/^[\w\d-]+$/.test(e)?"svg"===t?document.createElementNS(o.namespace.svg,e):document.createElement(e):((n="svg"===t?document.createElementNS(o.namespace.svg,"svg"):document.createElement("div")).innerHTML=e,o.selectAll(n).children().collection[0]);var n};o.node.prototype.append=function(t){var e,n;if(this._collection&&this._collection.enter){for(e=0;e<this._collection.enter.length;e++)(n=i(this.namespace,t))._data=this._collection.enter[e],o.selectAll(this.content).append(n),this.collection.push(n);delete this._collection,this.count=this.collection.length}else for(e=0;e<this.count;e++)n=i(this.namespace,t),this.collection[e].appendChild(n);return this},o.node.prototype.prepend=function(t){var e,n;if(this._collection&&this._collection.enter){for(e=0;e<this._collection.enter.length;e++)(n=i(this.namespace,t))._data=this._collection.enter[e],o.selectAll(this.content).prepend(n),this.collection.push(n);delete this._collection,this.count=this.collection.length}else for(e=0;e<this.count;e++)n=i(this.namespace,t),this.collection[e].insertBefore(n,this.clone().eq(e).children().collection[0]);return this},o.node.prototype.after=function(t){var e,n;if(this._collection&&this._collection.enter){for(e=0;e<this._collection.enter.length;e++)(n=i(this.namespace,t))._data=this._collection.enter[e],o.selectAll(this.content).after(n),this.collection.push(n);delete this._collection,this.count=this.collection.length}else for(e=0;e<this.count;e++)n=i(this.namespace,t),this.clone().eq(e).parent().collection[0].insertBefore(n,this.clone().eq(e).next().collection[0]);return this},o.node.prototype.before=function(t){var e,n;if(this._collection&&this._collection.enter){for(e=0;e<this._collection.enter.length;e++)(n=i(this.namespace,t))._data=this._collection.enter[e],o.selectAll(this.content).before(n),this.collection.push(n);delete this._collection,this.count=this.collection.length}else for(e=0;e<this.count;e++)n=i(this.namespace,t),this.clone().eq(e).parent().collection[0].insertBefore(n,this.collection[e]);return this},o.node.prototype.remove=function(){var t;for(t=0;t<this.count;t++)this.clone().eq(t).parent().collection[0].removeChild(this.collection[t]);return this},o.node.prototype.empty=function(){var t;for(t=0;t<this.count;t++)this.collection[t].innerHTML="";return this},o.node.prototype.attr=function(t,e,n){if(t&&"string"==typeof t){if(null===e||e===r)return 0<this.count?this.collection[0].getAttribute(t):r;var o,i;if(!n&&this._animation.transition&&"function"==typeof this._animation.attrback[t])for(o=0;o<this.count;o++)i=this.clone().eq(o),this._animation.attrback[t](t,i,o,i.attr(t),"function"==typeof e?e(this.collection[o]._data,o):e,this._animation.duration,this._animation.ease);else for(o=0;o<this.count;o++)this.collection[o].setAttribute(t,"function"==typeof e?e(this.collection[o]._data,o):e);return this}throw new Error("The name is invalid!")},o.node.prototype.css=function(t,e){var n;{if(arguments.length<=1&&"object"!=typeof t)return this.count<1?r:(n=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(this.collection[0],null):this.collection[0].currentStyle,"string"==typeof t?n.getPropertyValue(t):n);var o,i;if(0<this.count)if("object"==typeof t)for(i in t)for(o=0;o<this.count;o++)this.collection[o].style[i]=t[i];else this.collection[0].style[t]=e}return this}}(window,window.clay),function(t,n,e){"use strict";n.node.prototype.find=function(t){var e=n.selectAll(t,0<this.count?this.collection[0]:this.content);return e.namespace=this.namespace,e},n.node.prototype.parent=function(t){var e,n,o=this.collection;for(this.collection=[],e=0;e<this.count;e++)(n=o[e].parentNode)&&("function"!=typeof t||t(n,e))&&this.collection.push(n);return this.count=this.collection.length,this.selector+=":parent()",this},n.node.prototype.children=function(t){var e,n,o=this.collection;for(this.collection=[],n=o[0]?o[0].childNodes:[],e=0;e<n.length;e++)1!==n[e].nodeType&&11!==n[e].nodeType&&9!==n[e].nodeType||("function"!=typeof t||t(n[e]))&&this.collection.push(n[e]);return this.count=this.collection.length,this.selector+=":children()",this},n.node.prototype.next=function(t){var e,n,o=this.collection;for(this.collection=[],e=0;e<this.count;e++){for(n=o[e].nextSibling;n&&1!==n.nodeType&&11!==n.nodeType&&9!==n.nodeType&&n.nextSibling;)n=n.nextSibling;!n||1!==n.nodeType&&11!==n.nodeType&&9!==n.nodeType||("function"!=typeof t||t(n,e))&&this.collection.push(n)}return this.count=this.collection.length,this.selector+=":next()",this},n.node.prototype.prev=function(t){var e,n,o=this.collection;for(this.collection=[],e=0;e<this.count;e++){for(n=o[e].previousSibling;n&&1!==n.nodeType&&11!==n.nodeType&&9!==n.nodeType&&n.previousSibling;)n=n.previousSibling;!n||1!==n.nodeType&&11!==n.nodeType&&9!==n.nodeType||("function"!=typeof t||t(n,e))&&this.collection.push(n)}return this.count=this.collection.length,this.selector+=":prev()",this}}(window,window.clay),function(t,e,n){"use strict";window.clay.node.prototype.size=function(t){var e,n;return this.count<=0?{width:0,height:0}:("content"==t?(n=this.collection[0].clientWidth-(this.css("padding-left")+"").replace("px","")-(this.css("padding-right")+"").replace("px",""),e=this.collection[0].clientHeight-(this.css("padding-top")+"").replace("px","")-(this.css("padding-bottom")+"").replace("px","")):"padding"==t?(n=this.collection[0].clientWidth,e=this.collection[0].clientHeight):"border"==t?(n=this.collection[0].offsetWidth,e=this.collection[0].offsetHeight):"scroll"==t?(n=this.collection[0].scrollWidth,e=this.collection[0].scrollHeight):(n=this.collection[0].offsetWidth,e=this.collection[0].offsetHeight),{width:n,height:e})}}(window),function(t,e){"use strict";t.clay.scaleLinear=function(){var e={};function t(t){if("number"==typeof t){if(e.scaleCalc)return t<=e.domains[0]?e.ranges[0]:t>=e.domains[1]?e.ranges[1]:(t-e.domains[0])*e.scaleCalc+e.ranges[0];throw new Error("You shoud first set the domain and range!")}throw new Error("A number is required!")}return t.domain=function(t){if(!t||t.constructor!==Array||"number"!=typeof t[0]||"number"!=typeof t[1])throw new Error("Unsupported data!");return e.domains=t,e.ranges&&(e.scaleCalc=(e.ranges[1]-e.ranges[0])/(e.domains[1]-e.domains[0])),this},t.range=function(t){if(!t||t.constructor!==Array||"number"!=typeof t[0]||"number"!=typeof t[1])throw new Error("Unsupported data!");return e.ranges=t,e.domains&&(e.scaleCalc=(e.ranges[1]-e.ranges[0])/(e.domains[1]-e.domains[0])),this},t}}("undefined"!=typeof window?window:this),function(t,e){"use strict";t.clay.pieLayout=function(){var r={rotate:0},e=function(t){if(r.valueback){if(t&&t.constructor===Array){var e,n,o=[],i=0;for(e=0;e<t.length;e++)o.push({data:t[e],value:r.valueback(t[e],e)}),i+=o[e].value;for(e=0;e<t.length;e++)n=o[e].value/i*Math.PI*2,o[e].startAngle=0==e?r.rotate:o[e-1].endAngle,o[e].endAngle=o[e].startAngle+n,o[e].angle=n;return o}throw new Error("Unsupported data!")}throw new Error("You shoud first set the valueback!")};return e.rotate=function(t){if("number"!=typeof t)throw new Error("Unsupported data!");return r.rotate=t%(2*Math.PI),e},e.value=function(t){if("function"!=typeof t)throw new Error("Unsupported data!");return r.valueback=t,e},e}}("undefined"!=typeof window?window:this),function(t,e,n){"use strict";e.node.prototype.transition=function(){return this._animation.transition=!0,this},e.node.prototype.duration=function(t){if("number"!=typeof t)throw new Error("Unsupported data!");return this._animation.duration=t,this},e.node.prototype.ease=function(t){return this._animation.ease=t,this},e.node.prototype.noTransition=function(){return this._animation.transition=!1,this},e.node.prototype.animation=function(t,e){if("function"!=typeof e||"string"!=typeof t)throw new Error("Unsupported data!");return this._animation.attrback[t]=e,this}}(window,window.clay),function(t,u,e){"use strict";var n=function(e,n,t,o,i,r,c){var s=u.selectAll("head").css("color",o).css("color").replace(/^rgba?\(([^)]+)\)$/,"$1").split(","),a=u.selectAll("head").css("color",i).css("color").replace(/^rgba?\(([^)]+)\)$/,"$1").split(",");3==s.length&&(s[3]=1),3==a.length&&(a[3]=1);var l="function"==typeof c?c:u.math.ease(c);u.animation(function(t){t=l(t),n.attr(e,"rgba("+(t*(a[0]-s[0])*.01- -s[0])+","+(t*(a[1]-s[1])*.01- -s[1])+","+(t*(a[2]-s[2])*.01- -s[2])+","+(t*(a[3]-s[3])*.01- -s[3])+")",!0)},r,function(){n.attr(e,i,!0)})},o=function(t,e,n,o,i,r,c){e.attr(t,i,!0)};u.node.prototype.animation.attrback=function(){return{fill:n,stroke:n,width:o,height:o}}}(window,window.clay),function(t,e){"use strict";t.clay.svg.arc=function(){var p={innerRadius:0,outerRadius:10},e=function(t){var e=Math.sin(t.startAngle),n=Math.sin(t.endAngle),o=Math.cos(t.startAngle),i=Math.cos(t.endAngle),r=o*p.innerRadius+p.outerRadius,c=e*p.innerRadius+p.outerRadius,s=(1+o)*p.outerRadius,a=(1+e)*p.outerRadius,l=i*p.innerRadius+p.outerRadius,u=n*p.innerRadius+p.outerRadius,h=(1+i)*p.outerRadius,d=(1+n)*p.outerRadius,f=t.angle>Math.PI?1:0;return"M"+r+" "+c+"L"+s+" "+a+"A"+p.outerRadius+" "+p.outerRadius+" 0 "+f+" 1 "+h+" "+d+"L"+l+" "+u+"A"+p.innerRadius+" "+p.innerRadius+" 0 "+f+" 0 "+r+" "+c};return e.innerRadius=function(t){if(!("number"==typeof t&&t<p.outerRadius))throw new Error("Unsupported data!");return p.innerRadius=t,e},e.outerRadius=function(t){if(!("number"==typeof t&&t>p.innerRadius))throw new Error("Unsupported data!");return p.outerRadius=t,e},e}}("undefined"!=typeof window?window:this),function(h,t){"use strict";h.clay.svg.line=function(){var u={interpolate:"line",dis:5,t:0},e=function(t){if(t&&t.constructor===Array&&2<=t.length){var e="M"+u.xback(t[0],0)+" "+u.yback(t[0],0);if("line"==u.interpolate){var n;for(e+="L",n=1;n<t.length;n++)e+=u.xback(t[n],n)+" "+u.yback(t[n],n)+",";e=e.replace(/,$/,"")}else{if("cardinal"!=u.interpolate)throw new Error("Unsupported interpolate!");var o,i,r;for(e+="L",o=0;o<t.length-1;o++){var c=[u.xback(t[o],o),u.yback(t[o],o)],s=[u.xback(t[o+1],o+1),u.yback(t[o+1],o+1)],a=0==o?c:[u.xback(t[o-1],o-1),u.yback(t[o-1],o-1)],l=o>=t.length-2?s:[u.xback(t[o+2],o+2),u.yback(t[o+2],o+2)];for(r=h.clay.math.cardinal().setU(u.t).setPs(a[0],a[1],c[0],c[1],s[0],s[1],l[0],l[1]),i=c[0];i<s[0];i+=u.dis)e+=i+" "+r(i)+",";e+=s[0]+" "+r(s[0])+","}e=e.replace(/,$/,"")}return e}throw new Error("Unsupported data!")};return e.setT=function(t){if("number"!=typeof t)throw new Error("Unsupported data!");return u.t=t,e},e.setPrecision=function(t){if("number"!=typeof t)throw new Error("Unsupported data!");return u.dis=t,e},e.interpolate=function(t){return u.interpolate=t,e},e.x=function(t){if("function"!=typeof t)throw new Error("Unsupported data!");return u.xback=t,e},e.y=function(t){if("function"!=typeof t)throw new Error("Unsupported data!");return u.yback=t,e},e}}("undefined"!=typeof window?window:this);